<%= if (label_method != nil) && (value_method != nil)

      base_form.input attribute_name.to_sym,
                      label: my_label,
                      collection: my_collection,
                      label_method: label_method,
                      value_method: value_method,
                      prompt: "Select " + my_label,
                      label_html: { class: 'form_label' },
                      :input_html => { id: attribute_name,
                                       value: instance[attribute_name.to_sym],
                                       :'data-parsley-trigger' => 'keyup',
                                       :'data-parsley-maxlength' => 256 }
    else

      base_form.input attribute_name.to_sym,
                      label: my_label,
                      collection: my_collection,
                      prompt: "Select " + my_label,
                      label_html: { class: 'form_label' },
              :input_html =>
                      {
                              :id => attribute_name,
                              :value => instance[attribute_name.to_sym],
                              :'data-parsley-trigger' => 'keyup',
                              :'data-parsley-maxlength' => 256
                      }

    end
%>

<script>
    var $<%= attribute_name %> = $('#<%=attribute_name%>').selectize({});
    $<%= attribute_name %>[0].selectize.setValue('<%= instance[attribute_name.to_sym] %>');
    <% unless wizard_activated? %>
        <% if action_name == 'show' %>
        try { $<%= attribute_name %>[0].selectize.disable(); }
        catch(err) {}
        <% end %>
    <% end %>
</script>

<hr style="visibility: hidden">