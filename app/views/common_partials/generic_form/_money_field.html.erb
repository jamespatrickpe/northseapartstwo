<div class="row collapse">
  <div class="small-6 columns">
    <% amount_identifier = attribute_name.to_s + "_amount_field"; %>
    <%= f.input amount_identifier.to_sym,
                :as => :float,
                :label => "Amount in PHP",
                label_html: { class: 'form_label' },
                :input_html =>
                        {
                                :id => amount_identifier,
                                :value => selected_model_instance[attribute_name.to_sym] ||= 0.00,
                                :'data-parsley-trigger' => 'keyup',
                                :'data-parsley-maxlength' => 32,
                                :min => 0,
                                :pattern => "[0-9]+(\.[0-9][0-9]?)?",
                                :step => 0.01
                        }
    %>
  </div>
  <%
     require 'net/http'
     require 'json'
     url = 'http://api.fixer.io/latest?base=PHP'
     uri = URI(url)
     response = Net::HTTP.get(uri)
     currency_array = Hash.new
     currency_array = (JSON.parse(response)["rates"])
     currency_array[:PHP] = "1.00"
  %>
  <div class="small-6 columns">
    <% currency_identifier = attribute_name.to_s + "_currency_field"; %>
    <%= f.input currency_identifier.to_sym,
                collection: currency_array,
                :label => "Currency",
                :selected => '1.00',
                label_html: { class: 'form_label' },
                :input_html =>
                        {
                                :id => currency_identifier,
                                :value => selected_model_instance[attribute_name.to_sym],
                                :'data-parsley-trigger' => 'keyup',
                                :'data-parsley-maxlength' => 256
                        }
    %>
  </div>
</div>

<input id="amount_in_currency" type="hidden" name="<%= attribute_name %>" value="">

<script>
  $("#<%= currency_identifier %>").change(function() {
      amount_in_PHP = parseFloat( $("#<%= amount_identifier %>").val() );
      currency = parseFloat( $("#<%= currency_identifier %>").val() );
      amount_in_currency = amount_in_PHP * currency;
      $("#amount_in_currency").val(amount_in_currency);
  });
</script>