<section class='small-10 columns'>
  <div class='mainheader'> Actor Form </div>
  <div class='subdescription'> Create a new actor for the system </div>
  <hr>
  <div class='small-6 columns generic_form'>

    <%= generic_form_edit_id_indicator(@selected_actor[:id]) %>

    <%
       @selected_actor[:id].present? ?
               (current_method = :patch; current_action = @selected_actor[:id] ) :
               (current_method = :post; current_action = 'create')
    %>

    <%=
        form_tag( {:action => current_action},
                  {:method => current_method,
                   :class => 'create_form',
                   :id => "new_actor_form",
                   :"data-parsley-validate" => ""
                  },
        ) do
    %>

        <%= hidden_field_tag('actor[id]', @selected_actor[:id] ) %>

        <input type="text"
               required="required"
               placeholder="Name of Actor"
               data-parsley-trigger = keyup
               data-parsley-maxlength = 64
               id="actor_name"
               value= "<%= @selected_actor[:name] %>"
               name="actor[name]">

        <%=
            text_area_tag("actor[description]",
                          content = @selected_actor[:description],
                          options = {class: "remark_description",
                                     :"data-parsley-trigger" => "keyup",
                                     :"data-parsley-maxlength"=>"128",
                                     :placeholder => 'Description' })
        %>

        Upload your picture:
        <%= file_field_tag "actor[logo]", options = { "accept" => "image/*", :"data-parsley-trigger" => "change", "data-parsley-filesize"=>3000000, "data-parsley-filetype"=>"image"} %>
        </fieldset>

        <script>

            var myFileSize = 0;
            var myFileType = "";
            $('#actor_logo').bind('change', function() {
                myFileSize = this.files[0].size
                myFileType = this.files[0].type
            });

            window.Parsley
                    .addValidator('filesize', {
                        requirementType: 'string',
                        validateString: function(value, requirement)
                        {
                            myToken = false
                            if(myFileSize <= requirement)
                            {
                                myToken = true
                            }
                            return myToken
                        },
                        messages: {
                            en: 'File is too large; Must be less than 3MB'
                        }
                    });

            window.Parsley
                    .addValidator('filetype', {
                        requirementType: 'string',
                        validateString: function(value, requirement)
                        {
                            myToken = false
                            if(myFileType == "image/jpeg" || myFileType == "image/png" || myFileType == "image/gif" || myFileType == "image/jpg")
                            {
                                myToken = true
                            }
                            return myToken
                        },
                        messages: {
                            en: 'Incorrect File Type'
                        }
                    });

        </script>

        <br />

        <%= generic_form_footer(@selected_actor[:id]) %>
    <% end %>

  </div>
</section>